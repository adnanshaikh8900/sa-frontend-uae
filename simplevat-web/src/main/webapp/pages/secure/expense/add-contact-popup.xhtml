<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <h:form id="add_contact">
        <p:dialog header="New Contact" widgetVar="add_contact_popup" 
                  resizable="false" 
                  draggable="false" 
                  modal="true"
                  responsive="true" 
                  hideEffect="scale">
            <div class="ui-g form-group" style="margin-bottom: 16px;">
                <div class="ui-g-12">
                    <p:panelGrid columns="3" id="contactPanel"
                                 columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4" 
                                 layout="grid" 
                                 styleClass="ui-panelgrid-blank form-group"
                                 style="border:0px none; background-color:transparent;">


                        <h:panelGroup styleClass="md-inputfield">
                            <p:autoComplete id="contactTitle" converter="#{titleConverter}"
                                            dropdown="true" 
                                            forceSelection="true"
                                            effect="fold"
                                            required="true"
                                            scrollHeight="250"
                                            requiredMessage="Please select Title"
                                            completeMethod="#{expenseController.completeTitle}"
                                            value="#{expenseController.contactModel.title}" 
                                            var="title" 
                                            itemValue="#{title.titleCode}" 
                                            itemLabel="#{title.titleDescription}">
                            <p:clientValidator event="itemSelect"/>
                            </p:autoComplete>
                            <p:outputLabel for="contactTitle" value="Title"/>
                            <p:message for="contactTitle" />
                        </h:panelGroup>
                        <p:outputLabel/>
                        <p:outputLabel/>



                       <h:panelGroup styleClass="md-inputfield">
                           <p:inputText id="firstname" value="#{expenseController.contactModel.firstName}" required="true" requiredMessage="Please Enter name">
                           <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="firstname" value="First Name" styleClass="notRequiedSpace" />
                            <p:message for="firstname"/>
                        </h:panelGroup>


                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="middleName" 
                                         value="#{expenseController.contactModel.middleName}"/>
                            <p:outputLabel for="middleName" value="Middle Name" />
                        </h:panelGroup>


                        <h:panelGroup styleClass="md-inputfield" >
                            <p:inputText id="lastname" value="#{expenseController.contactModel.lastName}" required="true" requiredMessage="Enter Last name">
                            <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="lastname" value="Last Name" styleClass="notRequiedSpace" />
                            <p:message for="lastname"/>
                        </h:panelGroup>




                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="emailid" value="#{expenseController.contactModel.email}" required="true" validatorMessage="Invalid email format" requiredMessage="Enter EmailId">
                                <p:clientValidator event="keyup"/>
                                <f:validateRegex
                                    pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                            </p:inputText>
                            <p:outputLabel for="emailid" value="Email" styleClass="notRequiedSpace" />
                            <p:message for="emailid"/>
                        </h:panelGroup>

                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="addressLine1"
                                         required="true"
                                         requiredMessage="Please enter address"
                                         value="#{expenseController.contactModel.invoicingAddressLine1}">
                            <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="addressLine1" value="Address Line1" styleClass="notRequiedSpace" /> 
                            <p:message for="addressLine1" />
                        </h:panelGroup>

                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="addressLine2"
                                         required="true"
                                         requiredMessage="Please enter address"
                                         value="#{expenseController.contactModel.invoicingAddressLine2}">
                            <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="addressLine2" value="Address Line2" styleClass="notRequiedSpace"/>
                            <p:message for="addressLine2" />
                        </h:panelGroup>
                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="stateRegion"
                                         required="true"
                                         requiredMessage="Please enter State"
                                         value="#{expenseController.contactModel.stateRegion}"  >
                            <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="stateRegion" value="State Region"/>
                            <p:message for="stateRegion" />
                        </h:panelGroup>

                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="city" 
                                         value="#{expenseController.contactModel.city}"
                                         required="true"
                                         requiredMessage="Please enter City">
                            <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="city" value="City"/>
                            <p:message for="city" />
                        </h:panelGroup>

                        <h:panelGroup styleClass="md-inputfield">
                            <p:autoComplete id="country"
                                            converter="#{countryConverter}" 
                                            dropdown="true" 
                                            forceSelection="true" 
                                            effect="fold"
                                            scrollHeight="250"
                                            completeMethod="#{expenseController.completeCountry}"
                                            value="#{expenseController.contactModel.country}"
                                            var="country"
                                            itemValue="#{country.countryCode}"
                                            itemLabel="#{country.countryFullName}" 
                                            required="true"
                                            requiredMessage="Please select Country">
                                <p:clientValidator event="itemSelect"/>

                            </p:autoComplete>
                            <p:outputLabel for="country" value="Country"/>
                            <p:message for="country" />
                        </h:panelGroup>

                        <h:panelGroup styleClass="md-inputfield">

                            <p:autoComplete id="currency" dropdown="true" 
                                            forceSelection="true"
                                            effect="fold" 
                                            required="true"
                                            scrollHeight="250"
                                            requiredMessage="Please select Currency"
                                            converter="#{currencyConverter}"
                                            completeMethod="#{expenseController.completeCurrency}"
                                            value="#{expenseController.contactModel.currency}"
                                            var="currency" 
                                            itemValue="#{currency.currencyCode}"
                                            itemLabel="#{currency.currencyDescription} - #{currency.currencyIsoCode} (#{currency.currencySymbol})" >
                              <p:clientValidator event="itemSelect"/></p:autoComplete>
                            <p:outputLabel for="currency" value="Currency Code"/>
                            <p:message for="currency" />
                        </h:panelGroup>
                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="billingEmail"
                                         required="true"
                                         requiredMessage="Please enter Billing Email"
                                         value="#{expenseController.contactModel.billingEmail}"
                                         validatorMessage="Invalid email format" >
                                  <p:clientValidator event="keyup"/>
                                <f:validateRegex
                                    pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                            </p:inputText>
                            <p:outputLabel for="billingEmail" value="Billing Email"/>
                            <p:message for="billingEmail" />
                        </h:panelGroup>

                    </p:panelGrid>
                </div>

            </div>

            <f:facet name="footer">
                <p:commandButton 
                    actionListener="#{expenseController.createContact()}"
                    value="Save"
                    update="createExpenseForm:conatcts contactPanel" style="width:auto" 
                    icon="ui-icon-save"/>
            </f:facet>  
        </p:dialog>
    </h:form>
</ui:composition>
