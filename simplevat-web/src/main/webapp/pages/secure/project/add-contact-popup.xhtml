<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <h:form id="add_contact">
        <style type="text/css">
            .ui-dialog{
                width: 58% !important;
            }
            .ui-autocomplete{
                width: 100% !important;
            }
            .ui-autocomplete-input.ui-autocomplete-dd-input{
                padding-right: 0 !important;
            }
            .ui-inputfield{
                width: 100% !important;
            }
        </style>
        <p:dialog header="New Contact" widgetVar="add_contact_popup" 
                  resizable="false" 
                  draggable="false" 
                  modal="true"
                  responsive="true" 
                  hideEffect="scale">
            <div class="ui-g form-group" style="margin-bottom: 16px;">
                <div class="ui-g-12">
                    <p:panelGrid columns="3" id="contactPanel"
                                 columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4" 
                                 layout="grid" 
                                 styleClass="ui-panelgrid-blank form-group"
                                 style="border:0px none; background-color:transparent;">


                        <h:panelGroup styleClass="md-inputfield">
                            <p:autoComplete id="contactTitle" converter="#{titleConverter}"
                                            dropdown="true" 
                                            forceSelection="true"
                                            effect="fold"
                                            required="true"
                                            scrollHeight="250"
                                            requiredMessage="Please select Title"
                                            completeMethod="#{projectController.completeTitle}"
                                            value="#{projectController.contactModel.title}" 
                                            var="title" 
                                            itemValue="#{title.titleCode}" 
                                            itemLabel="#{title.titleDescription}">
                             <p:clientValidator event="itemSelect"/></p:autoComplete>
                            <p:outputLabel for="contactTitle" value="Title"/>
                            <p:message for="contactTitle" />
                        </h:panelGroup>

                        <p:outputLabel/>

                        <p:outputLabel/>

                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="firstname" value="#{projectController.contactModel.firstName}" required="true" requiredMessage="Please Enter name">
                             <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="firstname" value="First Name"/>
                            <p:message for="firstname"/>
                        </h:panelGroup>


                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="middleName" 
                                         value="#{projectController.contactModel.middleName}"/>
                            <p:outputLabel for="middleName" value="Middle Name"/>
                        </h:panelGroup>


                        <h:panelGroup styleClass="md-inputfield" >
                            <p:inputText id="lastname" value="#{projectController.contactModel.lastName}" required="true" requiredMessage="Enter Last name">
                             <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="lastname" value="Last Name"/>
                            <p:message for="lastname"/>
                        </h:panelGroup>



                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="emailid" value="#{projectController.contactModel.email}" required="true" validatorMessage="Invalid email format" requiredMessage="Enter EmailId">
                                <p:clientValidator event="keyup"/>
                                <f:validateRegex
                                    pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                            </p:inputText>
                            <p:outputLabel for="lastname" value="Email"/>
                            <p:message for="emailid"/>
                        </h:panelGroup>

                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="addressLine1"
                                         required="true"
                                         requiredMessage="Please enter address"
                                         value="#{projectController.contactModel.invoicingAddressLine1}">
                             <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="addressLine1" value="Address Line1" styleClass="notRequiedSpace" /> 
                            <p:message for="addressLine1" />
                        </h:panelGroup>

                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="addressLine2"
                                         required="true"
                                         requiredMessage="Please enter address"
                                         value="#{projectController.contactModel.invoicingAddressLine2}">
                             <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="addressLine2" value="Address Line2" styleClass="notRequiedSpace"/>
                            <p:message for="addressLine2" />
                        </h:panelGroup>
                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="stateRegion"
                                         required="true"
                                         requiredMessage="Please enter State"
                                         value="#{projectController.contactModel.stateRegion}"  >
                             <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="stateRegion" value="State Region"/>
                            <p:message for="stateRegion" />
                        </h:panelGroup>

                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="city" 
                                         value="#{projectController.contactModel.city}"
                                         required="true"
                                         requiredMessage="Please enter City">
                             <p:clientValidator event="keyup"/></p:inputText>
                            <p:outputLabel for="city" value="City"/>
                            <p:message for="city" />
                        </h:panelGroup>

                        <h:panelGroup styleClass="md-inputfield">
                            <p:autoComplete id="country"
                                            converter="#{countryConverter}" 
                                            dropdown="true" 
                                            forceSelection="true" 
                                            effect="fold"
                                            scrollHeight="250"
                                            completeMethod="#{projectController.completeCountry}"
                                            value="#{projectController.contactModel.country}"
                                            var="country"
                                            itemValue="#{country.countryCode}"
                                            itemLabel="#{country.countryFullName}" 
                                            required="true"
                                            requiredMessage="Please select Country">
                                 <p:clientValidator event="itemSelect"/>

                            </p:autoComplete>
                            <p:outputLabel for="country" value="Country"/>
                            <p:message for="country" />
                        </h:panelGroup>

                        <h:panelGroup styleClass="md-inputfield">

                            <p:autoComplete id="currency" dropdown="true" 
                                            forceSelection="true"
                                            effect="fold" 
                                            required="true"
                                            scrollHeight="250"
                                            requiredMessage="Please select Currency"
                                            converter="#{currencyConverter}"
                                            completeMethod="#{projectController.completeCurrency}"
                                            value="#{projectController.contactModel.currency}"
                                            var="currency" 
                                            itemValue="#{currency.currencyCode}"
                                            itemLabel="#{currency.currencyDescription} - #{currency.currencyIsoCode} (#{currency.currencySymbol})" >
                            <p:clientValidator event="itemSelect"/></p:autoComplete>
                            <p:outputLabel for="currency" value="Currency Code"/>
                            <p:message for="currency" />
                        </h:panelGroup>
                        <h:panelGroup styleClass="md-inputfield">
                            <p:inputText id="billingEmail"
                                         required="true"
                                         requiredMessage="Please enter Billing Email"
                                         value="#{projectController.contactModel.billingEmail}"
                                         validatorMessage="Invalid email format" >
                                <p:clientValidator event="keyup"/>
                                <f:validateRegex
                                    pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                            </p:inputText>
                            <p:outputLabel for="billingEmail" value="Billing Email"/>
                            <p:message for="billingEmail" />
                        </h:panelGroup>

                    </p:panelGrid>
                    <p:commandButton actionListener="#{projectController.createContact()}"
                                     value="#{messages.save}" 
                                     icon="ui-icon-save"
                                     update="project:conatcts contactPanel"
                                     style="width:auto;float: right;margin-right: 20px" />
                </div>

            </div>
        </p:dialog>
    </h:form>
</ui:composition>
