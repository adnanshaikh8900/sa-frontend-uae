<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:si="http://java.sun.com/jsf/composite/ccomponent"
                template="/WEB-INF/templates/template.xhtml">


    <ui:define name="title">Dashboard</ui:define>

    <ui:define name="head">
        <script type="text/javascript">
            //<![CDATA[
            function lineChart() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#FFC107', '#03A9F4'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#EEEEEE',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                    rendererOptions: {
                        textColor: '#212121'
                    },
                    tickOptions: {
                        angle: 45
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    lineWidth: 1,
                    markerOptions: {
                        shadow: false,
                        size: 7,
                        style: 'circle'
                    }
                };

            }
            function barChart() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#FFC107', '#03A9F4'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#EEEEEE',
                    shadow: false
                };
            }
            function areaChart() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#FFC107', '#03A9F4'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#EEEEEE',
                    shadow: false
                };
            }
            //]]>
        </script>
        <style type="text/css">
            .main-content {
                padding: 0;
            }
            .simplevat-dashboardupperpanel{
                height:350px;
                margin-bottom: 15px;
            }
            .simplevat-dashboardlowerpanel{
                height:400px;
                margin-bottom: 15px;
            }
            .ui-state-hover{
                background-color: #757575;
                margin-bottom: 15px;
            }
            .fc-center h2{
                font-size: 1.2em;
            }
        </style>
    </ui:define>

    <ui:define name="content">
        <h:form>

            <h:panelGroup layout="block" styleClass="ui-g dashboard" id="dashboardPanel">
                <p:dashboard id="board" model="#{homeController.model}" styleClass="ui-g-12 ui-md-12">
                    <p:ajax event="reorder" />

                    <p:panel id="cashflow" header="Cash Flow" styleClass="simplevat-dashboardupperpanel">
                        <h:panelGroup layout="block" style="width: auto;position:relative;">
                            <h:panelGroup styleClass="cashFlowChartPanelPlaceHolder" style="position:absolute;width:90%">
                                <ui:include src="../content-loading-placeholder.xhtml"/>
                            </h:panelGroup>
                            <h:panelGroup styleClass="cashFlowChartPanel" id="cashFlowChartPanel" layout="block" >
                                <p:chart type="line" model="#{homeController.cashFlowLineChartModel}" rendered="#{homeController.renderCashFlowLineChartModel}"
                                         style="height:280px;margin-top: 20px;" responsive="true" />
                                <p:graphicImage value="/resources/images/placeholder/cashflow_placeholder.png" width="360" height="300" style="display:none" rendered="#{!homeController.renderCashFlowLineChartModel}"/>
                            </h:panelGroup>
                        </h:panelGroup>
                    </p:panel>
                    <p:panel id="invoiceExpanse" header="Invoices and Expense"  styleClass="simplevat-dashboardupperpanel">
                        <h:panelGroup layout="block" style="width: 100%;position:relative;">
                            <h:panelGroup styleClass="invoiceAndExpansePanelPlaceHolder" style="position:absolute;width:90%">
                                <ui:include src="../content-loading-placeholder.xhtml"/>
                            </h:panelGroup>
                            <h:panelGroup styleClass="invoiceAndExpansePanel" id="invoiceAndExpansePanel">
                                <p:chart type="line" model="#{homeController.animatedModel1}" rendered="#{homeController.renderInvoiceExpanseChart}"
                                         style="height:280px;margin-top: 20px;" responsive="true"/>
                                <p:graphicImage styleClass="cashFlowChartPanel" value="/resources/images/placeholder/invoice_expanse_placeholder.png" width="360" height="300" style="display:none;" rendered="#{!homeController.renderInvoiceExpanseChart}"/>
                                <p:commandButton styleClass="cashFlowChartPanel" value="Create Your First Invoice" action="#{homeController.redirectToCreateInvoice}" style="display:none;position: absolute; top:115px;left:80px;padding-left: 17px;padding-right: 20px;" rendered="#{!homeController.renderInvoiceExpanseChart}"/>
                                <p:commandButton styleClass="cashFlowChartPanel" value="Create Your First Expanse" action="#{homeController.redirectToCreateExpense}" style="display:none;position: absolute; top:155px;left:80px" rendered="#{!homeController.renderInvoiceExpanseChart}"/>
                            </h:panelGroup>
                        </h:panelGroup>
                    </p:panel>
                    <p:panel id="vatActivity" header="VAT Acivity"  styleClass="simplevat-dashboardupperpanel">
                        <h:panelGroup layout="block" style="position:relative">
                            <h:panelGroup styleClass="vatActivityPanelPlaceHolder" style="position:absolute;width:90%">
                                <ui:include src="../content-loading-placeholder.xhtml"/>
                            </h:panelGroup>
                            <h:panelGroup id="vatActivityPanel" styleClass="vatActivityPanel" >
                                <p:chart type="bar" model="#{homeController.animatedModel2}" rendered="#{homeController.renderVatInVatOutChart}"
                                         style="height:280px;margin-top: 20px;" responsive="true" />
                                <p:graphicImage value="/resources/images/placeholder/vatinout_placeholder.png" styleClass="vatActivityPanel" style="display:none;" width="360" height="300" rendered="#{!homeController.renderVatInVatOutChart}"/>
                                <!--<p:commandButton value="Create Your First Invoice" style="position: absolute; top:130px;left:85px" rendered="#{!homeController.renderVatInVatOutChart}"/>-->
                            </h:panelGroup>
                        </h:panelGroup>
                    </p:panel>
                    <p:panel id="bankAccount"  header="Bank Account" styleClass="simplevat-dashboardlowerpanel" style="position:relative">
                        <p:scrollPanel mode="native" style="border: none">
                            <h:panelGroup layout="block"  style="border:none;">
                                <h:panelGroup styleClass="bankAccountPanelPlaceHolder">
                                    <ui:include src="../content-loading-placeholder.xhtml"/>
                                </h:panelGroup>
                                <h:panelGroup layout="block" styleClass="bankAccountPanel" id="bankAccountPanel" style="display:none;">
                                    <ul class="account-list">
                                        <ui:repeat
                                            value="#{homeController.bankAccountList}"
                                            var="value">
                                            <li>
                                                <div class="ui-g">
                                                    <div class="ui-g-6">
                                                        <div style="color: #757575; font-size: 17px;">
                                                            <p:commandLink value="#{value.bankAccountName} " action="#{homeController.loadBankAccountTransaction}" style="color: #009688;">
                                                                <f:setPropertyActionListener value="#{value.bankAccountId}" target="#{homeController.selectedBankAccountId}"/>
                                                            </p:commandLink> <h:outputText style="background-color: #{value.bankAccountStatus.bankAccountStatusCode.intValue() == 1?'#14ad3c':'#cacaca'};color: #FFFFFF; font-size: 12px;" value="(#{value.bankAccountStatus.bankAccountStatusName})"/>
                                                        </div>

                                                        <div style="color: #757575; font-size: 14px;">#{value.bankAccountType.name} Saving Account</div>
                                                    </div>
                                                    <div class="ui-g-6">
                                                        #{value.bankAccountCurrency.currencySymbol}#{value.currentBalance}
                                                    </div>
                                                </div>
                                            </li>
                                        </ui:repeat>
                                    </ul>
                                    <p:commandButton action="#{homeController.redirectToCreateBankAccount}"  value="Create Your Bank Account" style="position: absolute; top:180px;left:95px" rendered="#{homeController.bankAccountList.size() == 0}"/>
                                </h:panelGroup>
                            </h:panelGroup>
                        </p:scrollPanel>
                    </p:panel>
                    <p:panel id="scheduler" header="Calendar" styleClass="simplevat-dashboardlowerpanel">
                        <h:panelGroup layout="block" style="position:relative">
                            <h:panelGroup styleClass="eventPanelPlaceHolder" style="position:absolute;width:90%">
                                <ui:include src="../content-loading-placeholder.xhtml"/>
                            </h:panelGroup>
                            <h:panelGroup layout="block" id="eventPanel" styleClass="eventPanel" style="visibility: hidden">
                                <p:schedule timeFormat="HH:mm" value="#{homeController.eventModel}" rendered="#{not empty homeController.eventModel}" style="height:280px;" />
                            </h:panelGroup>
                        </h:panelGroup>
                    </p:panel>
                    <p:panel id="activity" header="Activity" styleClass="simplevat-dashboardlowerpanel">
                        <h:panelGroup layout="block" id="activityPanel">
                            <ul class="activity-list">
                                <ui:repeat var="activity" value="#{homeController.activities}">
                                    <li>
                                        <div class="ui-g">
                                            <div class="ui-g-6">#{activity.field3}</div>
                                            <div class="ui-g-6">
                                                <h:outputText value="#{activity.strLastUpdateDate}">

                                                </h:outputText>
                                            </div>
                                        </div>								
                                        <div class="ui-g">
                                            <div class="ui-g-6">#{activity.field1}</div>
                                            <div class="ui-g-6">#{activity.field2}</div>
                                        </div>								
                                    </li>
                                </ui:repeat>
                            </ul>
                        </h:panelGroup>
                    </p:panel>

                </p:dashboard>
                <div style="clear:both" />
            </h:panelGroup>
            <p:remoteCommand id="remoteCommandToLoadCashFlowChartPanel" autoRun="true" async="true" actionListener="#{homeController.lazyInitializationFlowChart}" update="cashFlowChartPanel cashFlowChartPanel" oncomplete="fadeOutPlaceHolder('cashFlowChartPanel');"/>
            <p:remoteCommand id="remoteCommandToLoadBankAccountPanel" autoRun="true" async="true" actionListener="#{homeController.lazyInitializationBankAccount}" update="bankAccountPanel" oncomplete="fadeOutPlaceHolder('bankAccountPanel')"/>
            <p:remoteCommand id="remoteCommandToLoadInvoiceAndExpansePanel" autoRun="true" async="true" actionListener="#{homeController.lazyInitializationInvoiceAndExpanse}" update="invoiceAndExpansePanel" oncomplete="fadeOutPlaceHolder('invoiceAndExpansePanel');"/>
            <p:remoteCommand id="remoteCommandToLoadVatActivityPanel" autoRun="true" async="true" actionListener="#{homeController.lazyInitializationVatActivity}" update="vatActivityPanel" oncomplete="fadeOutPlaceHolder('vatActivityPanel');"/>
            <p:remoteCommand id="remoteCommandToLoadEventPanel" autoRun="true" async="true" actionListener="#{homeController.lazyInitializationEvent}" update="eventPanel" oncomplete="updateSchedulLabel();"/>
            <p:remoteCommand id="remoteCommandToLoadContentActivityPanel" autoRun="true" async="true" actionListener="#{homeController.lazyInitializationActivity}" update="activityPanel"/>
        </h:form>

        <script type="text/javascript">
            function fadeOutPlaceHolder(styleClass) {
                $("." + styleClass + "PlaceHolder").fadeOut("slow", function () {
                    $("." + styleClass).fadeIn("slow");
                });
            }
            function updateSchedulLabel() {
                $('.fc-today-button').text('Today');
                $('.fc-month-button').text('M');
                $('.fc-agendaWeek-button').text('W');
                $('.fc-agendaDay-button').text('D');
                $('.eventPanel').css('visibility', 'visible');
                fadeOutPlaceHolder('eventPanel');
            }

        </script>
    </ui:define>
</ui:composition>