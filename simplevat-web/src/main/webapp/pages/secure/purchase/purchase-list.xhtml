<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:si="http://java.sun.com/jsf/composite/ccomponent"
                xmlns:p="http://primefaces.org/ui" 
                template="/WEB-INF/templates/template.xhtml">

    <ui:define name="title">Purchase</ui:define>
    <ui:define name="content">

        <h:form id="form">
            <si:cdataPanel newAction="#{purchaseListController.reDirectToCreate()}">
                <p:dataTable var="purchase" 
                             value="#{purchaseListController.purchaseModels}"
                             id="purchaseTable"
                             rowIndexVar="index" 
                             paginator="true" rows="10"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {TableHeader}">

                    <f:facet name="{TableHeader}">
                        <p:outputLabel styleClass="tableCustomHeader" value="Purchases" />
                    </f:facet>

                    <p:column headerText="#{messages.receiptnumber}" sortBy="#{purchase.receiptNumber}" filterMatchMode="contains" filterBy="#{purchase.receiptNumber}">
                        <h:outputText value="#{purchase.receiptNumber}" />
                    </p:column>

                    
                    <p:column headerText="#{messages.amount}" sortBy="#{purchase.purchaseAmount}" styleClass="amount" filterMatchMode="contains" filterBy="#{purchase.purchaseAmount}">
                        <h:outputText value="#{purchase.currency.currencySymbol} " />
                        <h:outputText value="#{purchase.purchaseAmount}" >
                            <f:convertNumber type="currency" currencySymbol=""/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="#{messages.description}" sortBy="#{expense.expenseDescription}" filterMatchMode="contains" filterBy="#{expense.expenseDescription}">
                        <h:outputText value="#{purchase.purchaseDescription}" />
                    </p:column>

                    <p:column headerText="Purchase Date" sortBy="#{purchase.purchaseDate}" filterMatchMode="contains" filterBy="#{purchase.purchaseDate}">
                        <h:outputText value="#{purchase.purchaseDate}" >
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </h:outputText>
                    </p:column>

                 <p:column headerText="Action">

                        <p:commandButton icon="ui-icon-edit" styleClass="AquaButton" action="#{purchaseListController.redirectToEdit}" title="edit purchase">
                            <f:setPropertyActionListener value="#{purchase}" target="#{purchaseListController.selectedPurchaseModel}" />
                        </p:commandButton>

                     
                     <p:commandButton icon="ui-icon-delete" styleClass="AquaButton" action="#{purchaseController.deletePurchase}" update="purchaseTable" title="delete purchase">
                         <f:setPropertyActionListener value="#{purchase}" target="#{purchaseController.selectedPurchaseModel}" />
                            <p:confirm header="#{messages.delete}" message="#{messages.are_you_sure_want_to_delete}" icon="ui-icon-alert" />
                        </p:commandButton>

                     
                    </p:column>

                </p:dataTable>
            </si:cdataPanel>
        </h:form>

    </ui:define>

</ui:composition>