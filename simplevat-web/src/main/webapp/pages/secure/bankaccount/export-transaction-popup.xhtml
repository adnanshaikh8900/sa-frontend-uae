<div xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:si="http://java.sun.com/jsf/composite/ccomponent"
     xmlns:p="http://primefaces.org/ui" >



    <style>
        .hasDatepicker{
            padding: 0 !important;
            font-size: 13px !important;
        }
    </style>
    <p:dialog widgetVar="exportTransactionWidget" modal="true" width="30%" >
        <h:form id="exportform">
            <div class="ui-g form-group" style="margin-bottom: 16px;">
                <div class="ui-g-12">
                    <p:panelGrid columns="2" id="exportpanel"
                                 columnClasses="ui-grid-col-6,ui-grid-col-6" 
                                 layout="grid" 
                                 styleClass="ui-panelgrid-blank form-group"
                                 style="border:0px none; background-color:transparent;">



                        <h:panelGroup styleClass="md-inputfield" >
                            <p:calendar id="startdate" 
                                        navigator="true" required="true" requiredMessage="Please Select Start Date"
                                        style="text-align:center"
                                        value="#{transactionExportController.startDate}" >
                                <p:clientValidator event="dateSelect"/>
                            </p:calendar>
                            <p:outputLabel for="startdate" value="#{messages.Start_Date}"/>
                            <p:message for="startdate" />
                        </h:panelGroup>


                        <h:panelGroup styleClass="md-inputfield" >
                            <p:calendar id="enddate" 
                                        navigator="true" required="true" requiredMessage="Please Select End Date"
                                        value="#{transactionExportController.endDate}" >
                                <p:clientValidator event="dateSelect"/>
                            </p:calendar>
                            <p:outputLabel for="enddate" value="#{messages.End_Date}"/>
                            <p:message for="enddate" />
                        </h:panelGroup>

                    </p:panelGrid>
                    <p:dataTable id="transactiondata" style="display: none" value="#{transactionExportController.transactionList}" var="transaction">
                        <f:facet name="header">
                            <h:commandLink value="demo" class="transactionExporter">
                                <p:dataExporter type="csv" target="transactiondata" fileName="transaction" />
                            </h:commandLink>
                        </f:facet>
                        <p:column headerText="Transaction Date">
                            <h:outputText value="#{transaction.transactionDate}" >
                                <f:convertDateTime pattern="MM/dd/yyyy" />
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Description">
                            <h:outputText value="#{transaction.transactionDescription}" />
                        </p:column>
                        <p:column headerText="Debit Amount">
                            <h:outputText value="#{transaction.transactionAmount}" rendered="#{transaction.debitCreditFlag.toString().equals('D')}" />
                        </p:column>
                        <p:column headerText="Credit Amount">
                            <h:outputText value="#{transaction.transactionAmount}" rendered="#{transaction.debitCreditFlag.toString().equals('C')}" />
                        </p:column>
                    </p:dataTable>
                </div>
            </div>
            <p:commandButton 
                value="Export"
                actionListener="#{transactionExportController.handleFileDownload()}"
                style="width:auto;float: right" process="exportform"
                update="exportform"
                icon="ui-icon-file-download"/>
            <p:remoteCommand name="exportTransaction" onsuccess="$('.transactionExporter').click();" oncomplete="PF('exportTransactionWidget').hide()"/>
        </h:form>
    </p:dialog>

</div>