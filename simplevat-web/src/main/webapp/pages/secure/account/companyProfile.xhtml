<div xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui"
     xmlns:si="http://java.sun.com/jsf/composite/ccomponent">

    <h:form id="companyProfile" enctype="multipart/form-data">

        <p:fieldset legend="#{messages.CompanyDetail}" toggleable="false">
            <p:panelGrid columns="4" 
                         columnClasses="ui-grid-col-6,ui-grid-col-6" 
                         layout="grid" 
                         styleClass="ui-panelgrid-blank form-group"
                         style="border:0px none; background-color:transparent;">


                <h:panelGroup>
                    <h:panelGroup styleClass="md-inputfield">
                        <p:inputText id="CompanyName"  value="#{companyProfileController.companyModel.companyName}" />
                        <p:outputLabel for="CompanyName" value="#{messages.CompanyName}"/>
                        <p:message for="CompanyName" />
                    </h:panelGroup>
                    <p:spacer height="10"/>
                    <h:panelGroup styleClass="md-inputfield">
                        <p:inputText id="CompanyRegistrationNumber" value="#{companyProfileController.companyModel.companyRegistrationNumber}"/>
                        <p:outputLabel for="CompanyRegistrationNumber" value="#{messages.CompanyRegistrationNumber}"/>
                        <p:message for="CompanyRegistrationNumber" />
                    </h:panelGroup>
                    <p:spacer height="10"/>
                    <h:panelGroup styleClass="md-inputfield">
                        <p:inputText id="VatRegistrationNumber" value="#{companyProfileController.companyModel.vatRegistrationNumber}"/>
                        <p:outputLabel for="VatRegistrationNumber" value="#{messages.VatRegistrationNumber}"/>
                        <p:message for="VatRegistrationNumber" />
                    </h:panelGroup>
                    <p:spacer height="10"/>
                    <h:panelGroup styleClass="md-inputfield">
                        <p:autoComplete id="CompanyTypeCode"
                                        converter="#{companyTypeConverter}" 
                                        dropdown="true" 
                                        forceSelection="true" 
                                        effect="fold"
                                        completeMethod="#{companyProfileController.completeCompanyType()}"
                                        value="#{companyProfileController.companyModel.companyTypeCode}"
                                        var="companyType"
                                        itemValue="#{companyType}"
                                        itemLabel="#{companyType.companyTypeName}" 
                                        required="true"
                                        scrollHeight="250"
                                        requiredMessage="Please select Company Type Code">
                            <p:clientValidator event="itemSelect"/></p:autoComplete>
                        <p:outputLabel for="CompanyTypeCode" value="#{messages.CompanyTypeCode}"/>
                        <p:message for="CompanyTypeCode" />
                    </h:panelGroup>
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield"  id="logo">

                    <div style="margin-left: 44%; margin-bottom: 15px;">
                        <ui:fragment rendered="#{companyProfileController.renderProfilePic}">
                            <p:graphicImage height="140px" width="140px" cache="false"
                                            value="#{streamedContentSessionController.streamedComapanyLogo}" />
                        </ui:fragment>
                        <ui:fragment rendered="#{!companyProfileController.renderProfilePic}">
                            <p:graphicImage name="images/SimpleVatFinalFullLogo.png" library="ultima-layout" height="150px" width="150px"/>

                        </ui:fragment>

                        <div style="width:140px">
                            <p:fileUpload fileUploadListener="#{companyProfileController.handleFileUpload}" mode="advanced" update="logo" id="CompanyLogo" 
                                          label="Upload Profile"  auto="true" sizeLimit="1000000" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
                        </div>

                    </div>
                </h:panelGroup>

            </p:panelGrid>

            <p:panelGrid columns="2" 
                         columnClasses="ui-grid-col-6,ui-grid-col-6" 
                         layout="grid" 
                         styleClass="ui-panelgrid-blank form-group"
                         style="border:0px none; background-color:transparent;">


                <h:panelGroup styleClass="md-inputfield">
                    <p:autoComplete id="IndustryTypeCode"
                                    converter="#{industryTypeConverter}" 
                                    dropdown="true" 
                                    forceSelection="true" 
                                    effect="fold"
                                    completeMethod="#{companyProfileController.completeIndustryType()}"
                                    value="#{companyProfileController.companyModel.industryTypeCode}"
                                    var="industryType"
                                    itemValue="#{industryType}"
                                    itemLabel="#{industryType.industryTypeName}" 
                                    required="true"
                                    scrollHeight="250"
                                    requiredMessage="Please select industry type">
                        <p:clientValidator event="itemSelect"/></p:autoComplete>
                    <p:outputLabel value="#{messages.IndustryTypeCode}"/>
                    <p:message for="IndustryTypeCode" />
                </h:panelGroup>
                <p:outputLabel for="Website" />
                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="Website" value="#{companyProfileController.companyModel.website}"
                                 validatorMessage="Invalid website format">

                        <f:validateRegex
                            pattern="^(http:\/\/|https:\/\/)?(www.)?([a-zA-Z0-9]+).[a-zA-Z0-9]*.[a-z]{3}\.([a-z]+)?$"/>
                    </p:inputText>
                    <p:outputLabel value="#{messages.Website}"/>
                    <p:message for="Website" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="EmailAddress" value="#{companyProfileController.companyModel.emailAddress}"
                                 validatorMessage="Invalid email format">
                        <f:validateRegex
                            pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                    </p:inputText>
                    <p:outputLabel for="EmailAddress" value="#{messages.EmailAddress}"/>
                    <p:message for="EmailAddress" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputMask id="phone" mask="9999999999" value="#{companyProfileController.companyModel.phoneNumber}"/>
                    <p:outputLabel for="phone" value="#{messages.PhoneNumber}"/>
                </h:panelGroup>
                <h:panelGroup styleClass="md-inputfield">
                    <p:autoComplete id="currencyCode"
                                    converter="#{currencyConverter}" 
                                    dropdown="true" 
                                    forceSelection="true" 
                                    effect="fold"
                                    completeMethod="#{companyProfileController.completeCurrency()}"
                                    value="#{companyProfileController.companyModel.currencyCode}"
                                    var="currency"
                                    itemValue="#{currency}"
                                    itemLabel="#{currency.currencyName}" 
                                    required="true"
                                    scrollHeight="250"
                                    requiredMessage="Please select Currency Code">
                        <p:clientValidator event="itemSelect"/></p:autoComplete>
                    <p:outputLabel for="currencyCode" value="Currency Code"/>
                    <p:message for="currencyCode" />
                </h:panelGroup>
            </p:panelGrid>


        </p:fieldset>

        <p:fieldset legend="#{messages.CompanyCostDetatil}" toggleable="false">
            <p:panelGrid columns="3" id="CompanyCost"
                         columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4" 
                         layout="grid" 
                         styleClass="ui-panelgrid-blank form-group"
                         style="border:0px none; background-color:transparent;">


                <h:panelGroup styleClass="md-inputfield">
                    <p:inputNumber id="CompanyExpenseBudget" disabled="true" value="#{companyProfileController.companyModel.companyExpenseBudget}" 
                                   symbolPosition="p" symbol="#{companyProfileController.companyModel.companyCountryCode.currencyCode.currencySymbol}" />
                    <p:outputLabel for="CompanyExpenseBudget" value="#{messages.CompanyExpenseBudget}"/>
                    <p:message for="CompanyExpenseBudget" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputNumber id="CompanyRevenueBudget" disabled="true" value="#{companyProfileController.companyModel.companyRevenueBudget}" 
                                   symbolPosition="p" symbol="#{companyProfileController.companyModel.companyCountryCode.currencyCode.currencySymbol}" />
                    <p:outputLabel for="CompanyRevenueBudget" value="#{messages.CompanyRevenueBudget}"/>
                    <p:message for="CompanyRevenueBudget" />
                </h:panelGroup>
            </p:panelGrid>
        </p:fieldset>

        <p:fieldset legend="#{messages.InvoicingAddress}" toggleable="false">
            <p:panelGrid columns="3" id="invoicingAdd"
                         columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4" 
                         layout="grid" 
                         styleClass="ui-panelgrid-blank form-group"
                         style="border:0px none; background-color:transparent;">
                <h:panelGroup styleClass="md-inputfield">
                    <p:inputTextarea id="InvoicingAddressLine1" value="#{companyProfileController.companyModel.invoicingAddressLine1}" 
                                     counter="counterValue"
                                     maxlength="255"
                                     rows="0"
                                     counterTemplate="{0} characters remaining." />
                    <h:outputText id="counterValue" />
                    <p:outputLabel for="InvoicingAddressLine1" value="#{messages.InvoicingAddressLine1}" />
                    <p:message for="InvoicingAddressLine1" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputTextarea id="InvoicingAddressLine2" value="#{companyProfileController.companyModel.invoicingAddressLine2}"
                                     counter="counterValue1"
                                     maxlength="255"
                                     counterTemplate="{0} characters remaining." />
                    <h:outputText id="counterValue1" />
                    <p:outputLabel for="InvoicingAddressLine2" value="#{messages.InvoicingAddressLine2}"/>
                    <p:message for="InvoicingAddressLine2" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputTextarea id="InvoicingAddressLine3" value="#{companyProfileController.companyModel.invoicingAddressLine3}"
                                     counter="counterValue2"
                                     maxlength="255"
                                     counterTemplate="{0} characters remaining." />
                    <p:outputLabel for="InvoicingAddressLine3" value="#{messages.InvoicingAddressLine3}"/>
                    <h:outputText id="counterValue2" />
                    <p:message for="InvoicingAddressLine3" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="InvoicingCity" value="#{companyProfileController.companyModel.invoicingCity}"/>
                    <p:outputLabel for="InvoicingCity" value="#{messages.InvoicingCity}"/>
                    <p:message for="InvoicingCity" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="InvoicingStateRegion" value="#{companyProfileController.companyModel.invoicingStateRegion}"/>
                    <p:outputLabel for="InvoicingStateRegion" value="#{messages.InvoicingStateRegion}"/>
                    <p:message for="InvoicingStateRegion" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:autoComplete id="InvoicingCountryCode"
                                    converter="#{countryConverter}" 
                                    dropdown="true" 
                                    forceSelection="true" 
                                    effect="fold"
                                    completeMethod="#{companyProfileController.completeCountry}"
                                    value="#{companyProfileController.companyModel.invoicingCountryCode}"
                                    var="country"
                                    itemValue="#{country.countryCode}"
                                    itemLabel="#{country.countryFullName}" 
                                    required="true"
                                    scrollHeight="250"
                                    requiredMessage="Please select Country Code">
                        <p:clientValidator event="itemSelect"/>
                    </p:autoComplete>
                    <p:outputLabel for="InvoicingCountryCode" value="#{messages.InvoicingCountryCode}"/>
                    <p:message for="InvoicingCountryCode" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="InvoicingPOBoxNumber" value="#{companyProfileController.companyModel.invoicingPoBoxNumber}"/>
                    <p:outputLabel for="InvoicingPOBoxNumber" value="#{messages.InvoicingPOBoxNumber}"/>
                    <p:message for="InvoicingPOBoxNumber" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="InvoicingPostZipCode" value="#{companyProfileController.companyModel.invoicingPostZipCode}"/>
                    <p:outputLabel for="InvoicingPostZipCode" value="#{messages.InvoicingPostZipCode}"/>
                    <p:message for="InvoicingPostZipCode" />
                </h:panelGroup>
                <h:panelGroup styleClass="md-inputfield">
                    <p:autoComplete id="dateType"
                                    dropdown="true"
                                    forceSelection="true"
                                    effect="fold"
                                    completeMethod="#{companyProfileController.completeDateFormat()}"
                                    value="#{companyProfileController.companyModel.dateFormat}"
                                    scrollHeight="250"
                                    >
                    </p:autoComplete>
                    <p:outputLabel for="dateType" value="Date Format"/>
                </h:panelGroup>
                <h:panelGroup />

            </p:panelGrid>
        </p:fieldset>
        <p:fieldset legend="#{messages.CompanyAddress}" toggleable="false">
            <p:panelGrid columns="6"
                         columnClasses="ui-grid-col-0,ui-grid-col-8" 
                         layout="grid" 
                         styleClass="ui-panelgrid-blank form-group"
                         style="border:0px none; background-color:transparent;">

                <p:outputLabel for="copyInvoiceAddress" />
                <h:panelGroup styleClass="md-inputwrapper-focus" >
                    <p:selectBooleanCheckbox id="copyInvoiceAddress" value="#{companyProfileController.copyInvoiceAddress}" >
                        <p:ajax update="companyAdd" process="companyProfile" event="change" listener="#{companyProfileController.sameAsInvoicingAddress()}"/>
                    </p:selectBooleanCheckbox>
                    <p:outputLabel for="copyInvoiceAddress" value="Company Address is same as Invoicing Address" />
                </h:panelGroup>
            </p:panelGrid>
            <p:spacer height="5" />
            <p:panelGrid columns="3" id="companyAdd"
                         columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4" 
                         layout="grid" 
                         styleClass="ui-panelgrid-blank form-group"
                         style="border:0px none; background-color:transparent;">

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputTextarea id="CompanyAddressLine1" value="#{companyProfileController.companyModel.companyAddressLine1}"
                                     counter="counterValue3"
                                     maxlength="255"
                                     disabled="#{companyProfileController.copyInvoiceAddress}"
                                     counterTemplate="{0} characters remaining." />
                    <h:outputText id="counterValue3" />
                    <p:outputLabel for="CompanyAddressLine1" value="#{messages.CompanyAddressLine1}"/>
                    <p:message for="CompanyAddressLine1" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputTextarea id="CompanyAddressLine2" value="#{companyProfileController.companyModel.companyAddressLine2}"
                                     counter="counterValue4"
                                     maxlength="255"
                                     disabled="#{companyProfileController.copyInvoiceAddress}"
                                     counterTemplate="{0} characters remaining." />
                    <h:outputText id="counterValue4" />
                    <p:outputLabel for="CompanyAddressLine2" value="#{messages.CompanyAddressLine2}"/>
                    <p:message for="CompanyAddressLine2" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputTextarea id="CompanyAddressLine3" value="#{companyProfileController.companyModel.companyAddressLine3}"
                                     counter="counterValue5"
                                     maxlength="255"
                                     disabled="#{companyProfileController.copyInvoiceAddress}"
                                     counterTemplate="{0} characters remaining." />
                    <h:outputText id="counterValue5" />
                    <p:outputLabel for="CompanyAddressLine3" value="#{messages.CompanyAddressLine3}"/>
                    <p:message for="CompanyAddressLine3" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="CompanyCity" 
                                 disabled="#{companyProfileController.copyInvoiceAddress}"
                                 value="#{companyProfileController.companyModel.companyCity}"/>
                    <p:outputLabel for="CompanyCity" value="#{messages.CompanyCity}"/>
                    <p:message for="CompanyCity" />
                </h:panelGroup>


                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="CompanyStateRegion" 
                                 disabled="#{companyProfileController.copyInvoiceAddress}"
                                 value="#{companyProfileController.companyModel.companyStateRegion}"/>
                    <p:outputLabel for="CompanyStateRegion" value="#{messages.CompanyStateRegion}"/>
                    <p:message for="CompanyStateRegion" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:autoComplete id="CompanyCountryCode"
                                    converter="#{countryConverter}" 
                                    dropdown="true" 
                                    forceSelection="true" 
                                    effect="fold"
                                    disabled="#{companyProfileController.copyInvoiceAddress}"
                                    completeMethod="#{companyProfileController.completeCountry}"
                                    value="#{companyProfileController.companyModel.companyCountryCode}"
                                    var="country" 
                                    itemValue="#{country.countryCode}"
                                    itemLabel="#{country.countryFullName}" 
                                    required="true"
                                    scrollHeight="250"
                                    requiredMessage="Please select Country Code">
                        <p:clientValidator event="itemSelect"/></p:autoComplete>
                    <p:outputLabel for="CompanyCountryCode" value="#{messages.CompanyCountryCode}"/>
                    <p:message for="CompanyCountryCode" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="CompanyPOBoxNumber" 
                                 disabled="#{companyProfileController.copyInvoiceAddress}"
                                 value="#{companyProfileController.companyModel.companyPoBoxNumber}"/>
                    <p:outputLabel for="CompanyPOBoxNumber"  value="#{messages.CompanyPOBoxNumber}"/>
                    <p:message for="CompanyPOBoxNumber" />
                </h:panelGroup>

                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="CompanyPostZipCode" 
                                 disabled="#{companyProfileController.copyInvoiceAddress}"
                                 value="#{companyProfileController.companyModel.companyPostZipCode}"/>
                    <p:outputLabel for="CompanyPostZipCode" value="#{messages.CompanyPostZipCode}" />
                    <p:message for="CompanyPostZipCode" />
                </h:panelGroup>
                <p:outputLabel  />
                <h:panelGroup />
            </p:panelGrid>
        </p:fieldset>
        <br/>
        <p:toolbar>
            <f:facet name="left">

                <p:commandButton actionListener="#{companyProfileController.saveUpdate()}"
                                 value="Save"
                                 update="@form"
                                 icon="ui-icon-save" />

                <span class="ui-separator" style="padding-right: 5px;">
                    <span class="fa fa-ellipsis-v SoftGray" />
                </span>
                <si:cbutton type="cancel" outcome="/pages/secure/home"/>
            </f:facet>

            <f:facet name="right">
                <si:cbutton type="home"/>
            </f:facet>
        </p:toolbar>
    </h:form>
</div>